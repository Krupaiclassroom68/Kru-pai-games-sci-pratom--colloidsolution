<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>‡πÄ‡∏Å‡∏°: ‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‚Äì‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå‚Äì‡πÅ‡∏Ç‡∏ß‡∏ô‡∏•‡∏≠‡∏¢ | Kru Pai Classroom (v2)</title>
<style>
  :root{ --brand:#8b5cf6; --ink:#111; --muted:#666; --card:#f7f7f8; --accent:#1d4ed8; --ok:#16a34a; --bad:#dc2626; }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,TH Sarabun New,Prompt,sans-serif;color:var(--ink);background:linear-gradient(180deg,#fff,#f3f4f6)}
  .wrap{max-width:980px;margin:0 auto;padding:24px}
  header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:16px}
  .brand{font-weight:800;letter-spacing:.2px;color:var(--brand)}
  .card{background:var(--card);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.06);padding:20px}
  h1{font-size:clamp(22px,3.4vw,34px);margin:0 0 6px}
  h2{font-size:clamp(18px,2.6vw,24px);margin:0 0 12px}
  p{margin:6px 0;color:var(--muted)}
  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  input[type=text]{width:260px;padding:12px 14px;border:2px solid #e5e7eb;border-radius:14px;font-size:16px}
  select{padding:10px 12px;border:2px solid #e5e7eb;border-radius:12px;font-size:16px;background:#fff}
  button{appearance:none;border:0;border-radius:14px;padding:12px 16px;font-weight:700;cursor:pointer}
  .btn-primary{background:var(--brand);color:#fff}
  .btn-ghost{background:#fff;border:2px solid #e5e7eb}
  .btn-next{background:var(--accent);color:#fff}
  .toolbar{display:flex;justify-content:space-between;align-items:center;gap:12px;margin:10px 0 16px;flex-wrap:wrap}
  .timer{display:flex;align-items:center;gap:10px}
  .timebar{flex:1;height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden}
  .timebar>span{display:block;height:100%;background:linear-gradient(90deg,#22c55e,#f59e0b,#ef4444);width:100%}
  .grid{display:grid;grid-template-columns:1fr;gap:10px}
  @media(min-width:720px){.grid{grid-template-columns:1fr 1fr}}
  .item{display:flex;gap:10px;align-items:flex-start;background:#fff;border:2px solid #e5e7eb;border-radius:14px;padding:12px}
  .check{--size:24px;min-width:var(--size);height:var(--size);border-radius:8px;border:2px solid #cbd5e1;display:inline-grid;place-items:center;cursor:pointer;user-select:none;flex:0 0 var(--size);font-size:16px}
  .check.active{background:#8b5cf6;border-color:#7c3aed;color:#fff}
  .note{font-size:13px;color:#475569}
  .mark-ok{border-color:var(--ok)}
  .mark-bad{border-color:var(--bad)}
  .foot{display:flex;flex-wrap:wrap;gap:10px;justify-content:flex-end;margin-top:12px}
  .pill{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:#fff;border:2px solid #e5e7eb}
  .score{font-size:20px;font-weight:900}
  .center{text-align:center}
  .hidden{display:none !important}
  .row-line{display:flex;align-items:center;gap:10px;background:#fff;border:2px solid #e5e7eb;border-radius:14px;padding:10px 12px}
  .row-line .name{font-weight:700}
  .opt{display:inline-flex;gap:6px;align-items:center;margin-right:10px}
  input[type=radio]{transform:scale(1.15)}
  .table{width:100%;border-collapse:separate;border-spacing:0 10px}
  .table td{padding:10px 12px;background:#fff;border:2px solid #e5e7eb}
  .table tr td:first-child{border-radius:14px 0 0 14px}
  .table tr td:last-child{border-radius:0 14px 14px 0}
  .right{margin-left:auto}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <div class="brand">Kru Pai Classroom</div>
      <div class="pill"><span>üî¨</span><strong>‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‚Äì‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå‚Äì‡∏™‡∏≤‡∏£‡πÅ‡∏Ç‡∏ß‡∏ô‡∏•‡∏≠‡∏¢ (v2)</strong></div>
    </div>
  </header>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
  <section id="home" class="card">
    <h1>‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏•‡∏∏‡∏¢ ‚Äú‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‚Äì‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå‚Äì‡πÅ‡∏Ç‡∏ß‡∏ô‡∏•‡∏≠‡∏¢‚Äù ‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏°!</h1>
    <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏î‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏≠‡∏á: ‡πÑ‡∏°‡πà‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ / 3 / 5 / 10 ‡∏ô‡∏≤‡∏ó‡∏µ ‚Ä¢ ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ‡∏ñ‡∏π‡∏Å <strong>+2</strong> | ‡∏ú‡∏¥‡∏î <strong>-1</strong> ‚Ä¢ ‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô ‚â• 70%</p>
    <div class="row" style="margin:10px 0 14px">
      <input id="player" type="text" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô..." />
      <label>‡πÄ‡∏ß‡∏•‡∏≤/‡∏î‡πà‡∏≤‡∏ô:
        <select id="timerSelect">
          <option value="0">‚è±Ô∏è ‡πÑ‡∏°‡πà‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤</option>
          <option value="180">3 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
          <option value="300" selected>5 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
          <option value="600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</option>
        </select>
      </label>
      <button class="btn-primary" id="startBtn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏° ‚ñ∂</button>
    </div>
    <div class="note">‡∏î‡πà‡∏≤‡∏ô 1: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äú‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‚Äù (‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏Å‡∏£‡∏≠‡∏á/‡πÄ‡∏ã‡∏•‡πÇ‡∏•‡πÄ‡∏ü‡∏ô/‡∏ó‡∏¥‡∏ô‡∏î‡∏≠‡∏•‡∏•‡πå ‡∏Ø‡∏•‡∏Ø) ‚Ä¢ ‡∏î‡πà‡∏≤‡∏ô 2: ‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äú‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå‚Äù ‚Ä¢ ‡∏î‡πà‡∏≤‡∏ô 3: ‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äú‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‚Äù</div>
  </section>

  <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô -->
  <section id="play" class="card hidden">
    <div class="toolbar">
      <div>
        <h2 id="roundTitle">‡∏î‡πà‡∏≤‡∏ô 1 ‚Ä¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥</h2>
        <div class="note" id="roundHint">‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢/‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå/‡πÅ‡∏Ç‡∏ß‡∏ô‡∏•‡∏≠‡∏¢‚Äù</div>
      </div>
      <div class="timer" id="timerBox" style="min-width:220px;">
        <div class="timebar"><span id="timebar"></span></div>
        <div class="pill"><strong id="clock">00:00</strong></div>
      </div>
      <div class="pill right hidden" id="roundScorePill">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ: <b id="roundScoreText">0/0</b></div>
      <div class="pill right hidden" id="passNote"></div>
    </div>

    <div id="round1" class="grid"></div>
    <div id="round2" class="grid hidden"></div>
    <div id="round3" class="grid hidden"></div>

    <div class="foot">
      <button class="btn-ghost" id="resetBtn">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏î‡πà‡∏≤‡∏ô</button>
      <button class="btn-primary" id="submitBtn">‡∏ï‡∏£‡∏ß‡∏à‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‚úÖ</button>
      <button class="btn-next hidden" id="nextBtn">‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ûú</button>
    </div>
  </section>

  <!-- ‡∏™‡∏£‡∏∏‡∏õ -->
  <section id="summary" class="card hidden center">
    <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏• ‚Ä¢ <span id="playerName">‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</span></h2>
    <div class="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏°: <span id="totalScore">0</span> / <span id="totalMax">0</span> (<span id="totalPercent">0</span>%)</div>
    <table class="table" style="margin-top:10px">
      <tr><td>‡∏î‡πà‡∏≤‡∏ô 1 ‚Ä¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥</td><td id="t1">0</td></tr>
      <tr><td>‡∏î‡πà‡∏≤‡∏ô 2 ‚Ä¢ ‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå</td><td id="t2">0</td></tr>
      <tr><td>‡∏î‡πà‡∏≤‡∏ô 3 ‚Ä¢ ‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢</td><td id="t3">0</td></tr>
      <tr><td><strong>‡∏£‡∏ß‡∏°</strong></td><td id="t4"><strong>0</strong></td></tr>
    </table>
    <div class="foot center" style="justify-content:center">
      <button class="btn-primary" id="replay">‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á üîÅ</button>
    </div>
  </section>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){
  const $ = (q)=>document.querySelector(q);
  const el = (tag, cls, html)=>{ const d=document.createElement(tag); if(cls) d.className=cls; if(html!==undefined) d.innerHTML=html; return d; };
  const shuffle = (arr)=>arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(p=>p[1]);

  // ---------- ‡∏î‡πà‡∏≤‡∏ô 1: ‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ -> ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ----------
  const PROP_STATEMENTS = [
    ["‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ‡πÄ‡∏•‡πá‡∏Å‡∏°‡∏≤‡∏Å (~< 1 ‡∏ô‡∏≤‡πÇ‡∏ô‡πÄ‡∏°‡∏ï‡∏£) ‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡πà‡∏ô‡πÄ‡∏ã‡∏•‡πÇ‡∏•‡πÄ‡∏ü‡∏ô ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏¥‡∏ô‡∏î‡∏≠‡∏•‡∏•‡πå", "solution"],
    ["‡πÅ‡∏™‡∏á‡πÄ‡∏•‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏™‡πà‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏•‡∏≥‡πÅ‡∏™‡∏á‡∏ä‡∏±‡∏î (‡∏ó‡∏¥‡∏ô‡∏î‡∏≠‡∏•‡∏•‡πå) ‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ã‡∏•‡πÇ‡∏•‡πÄ‡∏ü‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÑ‡∏°‡πà‡∏ï‡∏Å‡∏ï‡∏∞‡∏Å‡∏≠‡∏ô‡∏á‡πà‡∏≤‡∏¢", "colloid"],
    ["‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ‡πÉ‡∏´‡∏ç‡πà ‡πÄ‡∏´‡πá‡∏ô‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏≤‡πÄ‡∏õ‡∏•‡πà‡∏≤/‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏∏‡∏•‡∏ó‡∏£‡∏£‡∏®‡∏ô‡πå ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏Å‡∏£‡∏≠‡∏á ‡∏ï‡∏Å‡∏ï‡∏∞‡∏Å‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏ß‡πâ", "suspension"],
    ["‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡∏ô‡∏°‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏á‡∏Å‡∏£‡∏∞‡πÄ‡∏à‡∏¥‡∏á ‡πÄ‡∏´‡πá‡∏ô‡∏•‡∏≥‡πÅ‡∏™‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡πÅ‡∏ï‡πà‡∏Ç‡∏≠‡∏á‡∏ú‡∏™‡∏°‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏ï‡∏±‡∏ß ‡πÑ‡∏°‡πà‡πÅ‡∏¢‡∏Å‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡πá‡∏ß", "colloid"],
    ["‡∏ô‡πâ‡∏≥‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÉ‡∏™ ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ó‡∏¥‡∏ô‡∏î‡∏≠‡∏•‡∏•‡πå ‡πÄ‡∏Å‡πá‡∏ö‡∏ô‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÅ‡∏¢‡∏Å‡∏ä‡∏±‡πâ‡∏ô", "solution"],
    ["‡∏ô‡πâ‡∏≥‡πÇ‡∏Ñ‡∏•‡∏ô ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Ç‡∏∏‡πà‡∏ô ‡∏û‡∏±‡∏Å‡πÑ‡∏ß‡πâ‡∏à‡∏∞‡∏°‡∏µ‡∏ï‡∏∞‡∏Å‡∏≠‡∏ô‡∏ï‡∏Å‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á", "suspension"],
    ["‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏Å‡∏£‡∏≠‡∏á‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏Å‡∏±‡πâ‡∏ô‡∏Å‡∏∂‡πà‡∏á‡∏ã‡∏∂‡∏°‡∏ú‡πà‡∏≤‡∏ô (‡πÄ‡∏ã‡∏•‡πÇ‡∏•‡πÄ‡∏ü‡∏ô) ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏Å‡∏±‡πâ‡∏ô‡πÑ‡∏ß‡πâ", "colloid"],
    ["‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏Å‡∏£‡∏≠‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏ô‡∏∏‡∏†‡∏≤‡∏Ñ‡πÉ‡∏´‡∏ç‡πà (‡∏Ç‡∏≠‡∏á‡πÅ‡∏Ç‡πá‡∏á‡πÑ‡∏°‡πà‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡πÉ‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏ß)", "suspension"],
    ["‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏Å‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏¢‡∏∑‡πà‡∏≠‡∏Å‡∏±‡πâ‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏°‡∏î ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡πÄ‡∏à‡∏¥‡∏á‡πÅ‡∏™‡∏á", "solution"],
    ["‡πÉ‡∏´‡πâ Brownian motion ‡∏ä‡∏±‡∏î ‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏ó‡∏¥‡∏ô‡∏î‡∏≠‡∏•‡∏•‡πå", "colloid"],
  ];

  // ---------- ‡∏î‡πà‡∏≤‡∏ô 2: ‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå ----------
  const EXAMPLES_COLLOID = [
    ["‡∏ô‡∏°", true],
    ["‡∏´‡∏°‡∏≠‡∏Å", true],
    ["‡∏Ñ‡∏ß‡∏±‡∏ô", true],
    ["‡∏™‡∏µ‡∏ó‡∏≤‡∏ö‡πâ‡∏≤‡∏ô", true],
    ["‡∏°‡∏≤‡∏¢‡∏≠‡∏á‡πÄ‡∏ô‡∏™", true],
    ["‡∏ß‡∏∏‡πâ‡∏ô‡πÄ‡∏à‡∏•‡∏≤‡∏ï‡∏¥‡∏ô", true],
    ["‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏û‡∏•‡∏≤‡∏™‡∏°‡∏≤", true],
    ["‡πÅ‡∏õ‡πâ‡∏á‡πÉ‡∏ô‡∏ô‡πâ‡∏≥ (‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ä‡∏ã‡∏≠‡∏•)", true],

    ["‡∏ô‡πâ‡∏≥‡πÄ‡∏Å‡∏•‡∏∑‡∏≠‡πÉ‡∏™", false],
    ["‡∏≠‡∏≤‡∏Å‡∏≤‡∏®", false],
    ["‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏Ñ‡∏±‡πâ‡∏ô‡∏õ‡∏ô‡∏Å‡∏≤‡∏Å", false],
    ["‡∏ô‡πâ‡∏≥‡πÇ‡∏Ñ‡∏•‡∏ô", false],
    ["‡∏ô‡πâ‡∏≥‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°", false],
    ["‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡πÅ‡∏¢‡∏Å‡∏ä‡∏±‡πâ‡∏ô", false]
  ];

  // ---------- ‡∏î‡πà‡∏≤‡∏ô 3: ‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢ ----------
  const EXAMPLES_SOLUTION = [
    ["‡∏ô‡πâ‡∏≥‡πÄ‡∏Å‡∏•‡∏∑‡∏≠‡πÉ‡∏™ (NaCl ‡πÉ‡∏ô H‚ÇÇO)", true],
    ["‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏ô‡πâ‡∏≥", true],
    ["‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏™‡∏≤‡∏¢‡∏ä‡∏π (CH‚ÇÉCOOH ‡πÉ‡∏ô‡∏ô‡πâ‡∏≥)", true],
    ["‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°‡∏Å‡πä‡∏≤‡∏ã‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠)", true],
    ["‡∏ó‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á (Cu‚ÄìZn ‡∏≠‡∏±‡∏•‡∏•‡∏≠‡∏¢)", true],
    ["‡πÇ‡∏ã‡∏î‡∏≤/‡∏ô‡πâ‡∏≥‡∏≠‡∏±‡∏î‡∏•‡∏° (CO‚ÇÇ ‡πÉ‡∏ô‡∏ô‡πâ‡∏≥)", true],
    ["‡πÅ‡∏≠‡∏•‡∏Å‡∏≠‡∏Æ‡∏≠‡∏•‡πå‡∏ú‡∏™‡∏°‡∏ô‡πâ‡∏≥ (iPrOH + H‚ÇÇO)", true],

    ["‡∏ô‡∏°", false],
    ["‡∏ô‡πâ‡∏≥‡πÇ‡∏Ñ‡∏•‡∏ô", false],
    ["‡∏´‡∏°‡∏≠‡∏Å", false],
    ["‡∏™‡∏µ‡∏ó‡∏≤‡∏ö‡πâ‡∏≤‡∏ô", false],
    ["‡∏°‡∏≤‡∏¢‡∏≠‡∏á‡πÄ‡∏ô‡∏™", false],
    ["‡πÅ‡∏õ‡πâ‡∏á‡πÉ‡∏ô‡∏ô‡πâ‡∏≥", false]
  ];

  // ---------- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ï‡πá‡∏° ----------
  const MAX1 = 10 * 2;
  const MAX2 = EXAMPLES_COLLOID.filter(x=>x[1]).length * 2;
  const MAX3 = EXAMPLES_SOLUTION.filter(x=>x[1]).length * 2;
  const TOTAL_MAX = MAX1 + MAX2 + MAX3;

  // ---------- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏Å‡∏° ----------
  let currentRound = 1;
  let scores = {1:0,2:0,3:0};
  let timer = null;
  let ROUND_SECONDS = 300; // ‡∏î‡∏µ‡∏ü‡∏≠‡∏•‡∏ï‡πå 5 ‡∏ô‡∏≤‡∏ó‡∏µ (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ)
  let left = ROUND_SECONDS;
  let noTimer = false;

  // ---------- UI Builder ----------
  function buildRound1(){
    const box = $("#round1"); box.innerHTML='';
    const items = shuffle(PROP_STATEMENTS).slice(0,10);
    items.forEach((pair, i)=>{
      const [text, key] = pair;
      const row = el('div','row-line');
      row.dataset.answer = key;
      const title = el('div','name', `<span>${i+1}.</span> ${text}`);
      const ops = el('div','', `
        <label class="opt"><input type="radio" name="r1_${i}" value="solution"> ‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢</label>
        <label class="opt"><input type="radio" name="r1_${i}" value="colloid"> ‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå</label>
        <label class="opt"><input type="radio" name="r1_${i}" value="suspension"> ‡πÅ‡∏Ç‡∏ß‡∏ô‡∏•‡∏≠‡∏¢</label>
      `);
      row.appendChild(title); row.appendChild(ops);
      box.appendChild(row);
    });
  }

  function buildCheckRound(containerSel, data){
    const box = $(containerSel); box.innerHTML='';
    shuffle(data).forEach((pair, idx)=>{
      const [text, isTrue] = pair;
      const row = el('div','item');
      const boxBtn = el('div','check'); boxBtn.setAttribute('role','checkbox'); boxBtn.dataset.answer = isTrue ? 'true' : 'false';
      boxBtn.addEventListener('click', ()=> boxBtn.classList.toggle('active'));
      const txt = el('div','', `<div><strong>${idx+1}.</strong> ${text}</div><div class="note">‡∏ï‡∏¥‡πä‡∏Å‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡πÉ‡∏ä‡πà</div>`);
      row.appendChild(boxBtn); row.appendChild(txt);
      box.appendChild(row);
    });
  }

  // ---------- Timer ----------
  function startTimer(){
    clearInterval(timer);
    if(noTimer){
      document.getElementById('timerBox').classList.add('hidden');
      return;
    }
    document.getElementById('timerBox').classList.remove('hidden');
    left = ROUND_SECONDS; updateClock();
    timer = setInterval(()=>{
      left--; updateClock();
      if(left<=0){ clearInterval(timer); autoSubmit(); }
    },1000);
  }
  function updateClock(){
    const m = String(Math.floor(left/60)).padStart(2,'0');
    const s = String(left%60).padStart(2,'0');
    document.getElementById('clock').textContent = m+':'+s;
    document.getElementById('timebar').style.width = Math.max(0, left/ROUND_SECONDS*100)+'%';
  }

  // ---------- Grading ----------
  function gradeRound(){
    let earned = 0, max = 0;
    scores[currentRound] = 0;
    if(currentRound===1){
      max = MAX1;
      document.querySelectorAll('#round1 .row-line').forEach(row=>{
        const ans = row.dataset.answer;
        const picked = [...row.querySelectorAll('input[type=radio]')].find(r=>r.checked)?.value;
        if(!picked) return;
        if(picked===ans){ earned += 2; row.classList.add('mark-ok'); }
        else{ earned -= 1; row.classList.add('mark-bad'); }
      });
      scores[1] = earned;
    } else if(currentRound===2){
      max = MAX2;
      document.querySelectorAll('#round2 .item').forEach(item=>{
        const boxBtn = item.querySelector('.check');
        const picked = boxBtn.classList.contains('active');
        const isTrue = (boxBtn.dataset.answer==='true');
        if(picked && isTrue){ earned += 2; item.classList.add('mark-ok'); }
        if(picked && !isTrue){ earned -= 1; item.classList.add('mark-bad'); }
      });
      scores[2] = earned;
    } else {
      max = MAX3;
      document.querySelectorAll('#round3 .item').forEach(item=>{
        const boxBtn = item.querySelector('.check');
        const picked = boxBtn.classList.contains('active');
        const isTrue = (boxBtn.dataset.answer==='true');
        if(picked && isTrue){ earned += 2; item.classList.add('mark-ok'); }
        if(picked && !isTrue){ earned -= 1; item.classList.add('mark-bad'); }
      });
      scores[3] = earned;
    }
    return {earned, max};
  }

  function showRoundScore(earned, max){
    document.getElementById('roundScoreText').textContent = earned + '/' + max;
    document.getElementById('roundScorePill').classList.remove('hidden');
  }

  function lockRound(canNext){
    document.getElementById('submitBtn').classList.add('hidden');
    const note = document.getElementById('passNote');
    if(canNext){
      document.getElementById('nextBtn').classList.remove('hidden');
      note.textContent = '‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå 70% ‚úì ‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÑ‡∏î‡πâ';
      note.classList.remove('hidden');
    }else{
      document.getElementById('nextBtn').classList.add('hidden');
      note.textContent = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á 70% ‚Üí ‡∏Å‡∏î‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà';
      note.classList.remove('hidden');
    }
    if(currentRound===1){
      document.querySelectorAll('#round1 input[type=radio]').forEach(r=> r.disabled = true);
    }else{
      document.querySelectorAll((currentRound===2?'#round2':'#round3')+' .check').forEach(c=> c.style.pointerEvents='none');
    }
  }

  function autoSubmit(){
    if(document.getElementById('play').classList.contains('hidden')) return;
    const {earned, max} = gradeRound();
    showRoundScore(earned, max);
    const pass = earned >= Math.ceil(0.7*max);
    lockRound(pass);
  }

  // ---------- Navigation ----------
  function showRound(n){
    currentRound = n;
    document.getElementById('roundScorePill').classList.add('hidden');
    document.getElementById('passNote').classList.add('hidden');
    document.getElementById('roundTitle').textContent =
      n===1 ? '‡∏î‡πà‡∏≤‡∏ô 1 ‚Ä¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥' :
      n===2 ? '‡∏î‡πà‡∏≤‡∏ô 2 ‚Ä¢ ‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå' :
              '‡∏î‡πà‡∏≤‡∏ô 3 ‚Ä¢ ‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢';
    document.getElementById('roundHint').textContent =
      n===1 ? '‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢/‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå/‡πÅ‡∏Ç‡∏ß‡∏ô‡∏•‡∏≠‡∏¢‚Äù' :
      n===2 ? '‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏Ñ‡∏≠‡∏•‡∏•‡∏≠‡∏¢‡∏î‡πå‚Äù' :
              '‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‚Äù';
    document.getElementById('round1').classList.toggle('hidden', n!==1);
    document.getElementById('round2').classList.toggle('hidden', n!==2);
    document.getElementById('round3').classList.toggle('hidden', n!==3);
    document.getElementById('submitBtn').classList.remove('hidden');
    document.getElementById('nextBtn').classList.add('hidden');
    document.querySelectorAll('.mark-ok,.mark-bad').forEach(e=>{ e.classList.remove('mark-ok','mark-bad'); });
    if(n===1) buildRound1();
    if(n===2) buildCheckRound('#round2', EXAMPLES_COLLOID);
    if(n===3) buildCheckRound('#round3', EXAMPLES_SOLUTION);
    startTimer();
  }

  // ---------- Events ----------
  document.getElementById('startBtn').addEventListener('click', ()=>{
    const name = document.getElementById('player').value.trim() || '‡∏ô‡∏±‡∏Å‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢';
    document.getElementById('playerName').textContent = name;
    const val = parseInt(document.getElementById('timerSelect').value, 10);
    if(val === 0){ noTimer = true; ROUND_SECONDS = 300; } else { noTimer = false; ROUND_SECONDS = val; }
    document.getElementById('home').classList.add('hidden');
    document.getElementById('play').classList.remove('hidden');
    scores = {1:0,2:0,3:0};
    showRound(1);
  });

  document.getElementById('submitBtn').addEventListener('click', ()=>{
    clearInterval(timer);
    const {earned, max} = gradeRound();
    showRoundScore(earned, max);
    const pass = earned >= Math.ceil(0.7*max);
    lockRound(pass);
  });

  document.getElementById('nextBtn').addEventListener('click', ()=>{
    if(currentRound<3){ showRound(currentRound+1); }
    else{
      const total = scores[1]+scores[2]+scores[3];
      const percent = Math.max(0, Math.round(total/TOTAL_MAX*100));
      document.getElementById('totalScore').textContent = total;
      document.getElementById('totalMax').textContent = TOTAL_MAX;
      document.getElementById('totalPercent').textContent = percent;
      document.getElementById('t1').textContent = scores[1]+' / '+MAX1;
      document.getElementById('t2').textContent = scores[2]+' / '+MAX2;
      document.getElementById('t3').textContent = scores[3]+' / '+MAX3;
      document.getElementById('t4').textContent = total+' / '+TOTAL_MAX+' ('+percent+'%)';
      document.getElementById('play').classList.add('hidden');
      document.getElementById('summary').classList.remove('hidden');
    }
  });

  document.getElementById('resetBtn').addEventListener('click', ()=>{
    scores[currentRound] = 0;
    if(currentRound===1) buildRound1();
    if(currentRound===2) buildCheckRound('#round2', EXAMPLES_COLLOID);
    if(currentRound===3) buildCheckRound('#round3', EXAMPLES_SOLUTION);
    document.querySelectorAll('.mark-ok,.mark-bad').forEach(e=>{ e.classList.remove('mark-ok','mark-bad'); });
    document.getElementById('submitBtn').classList.remove('hidden');
    document.getElementById('nextBtn').classList.add('hidden');
    document.getElementById('roundScorePill').classList.add('hidden');
    document.getElementById('passNote').classList.add('hidden');
    startTimer();
  });

  document.getElementById('replay').addEventListener('click', ()=>{
    document.getElementById('summary').classList.add('hidden');
    document.getElementById('home').classList.remove('hidden');
  });

  document.addEventListener('mousedown', e=>{ if(e.detail>1) e.preventDefault(); }, false);
});
</script>
</body>
</html>
